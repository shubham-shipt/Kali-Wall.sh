<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="KaliWall - Premium Kali Linux wallpapers, videos, and media collection. Upload, share, and download high-quality cybersecurity wallpapers. Free worldwide access.">
    <meta name="keywords" content="kali linux wallpapers, cybersecurity wallpapers, hacking wallpapers, dark wallpapers, tech wallpapers, 4K wallpapers, free wallpapers, upload wallpapers">
    <meta name="author" content="Shubham Singh (@shivam-the)">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    
    <!-- Open Graph Meta Tags (WhatsApp, Facebook, LinkedIn) -->
    <meta property="og:title" content="KaliWall - Premium Kali Linux Wallpapers">
    <meta property="og:description" content="Upload, share, and download premium Kali Linux wallpapers. Free worldwide access with Firebase storage.">
    <meta property="og:image" content="https://shivam-the.github.io/kaliwall/assets/web-logo.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://shivam-the.github.io/kaliwall/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="KaliWall">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KaliWall - Premium Kali Linux Wallpapers">
    <meta name="twitter:description" content="Upload and download premium Kali Linux wallpapers worldwide.">
    <meta name="twitter:image" content="https://shivam-the.github.io/kaliwall/assets/web-logo.png">
    <meta name="twitter:site" content="@Om_singh_213">
    
    <link rel="canonical" href="https://shivam-the.github.io/kaliwall/">
    
    <title>KaliWall - Premium Kali Linux Wallpapers | Free Download & Upload</title>
    <link rel="icon" type="image/png" href="assets/web-logo.png">
    <link rel="apple-touch-icon" href="assets/web-logo.png">
    
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "KaliWall",
      "url": "https://shivam-the.github.io/kaliwall/",
      "description": "Premium Kali Linux wallpapers collection with Firebase storage",
      "image": "https://shivam-the.github.io/kaliwall/assets/web-logo.png",
      "author": {
        "@type": "Person",
        "name": "Shubham Singh"
      }
    }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700;800&family=Orbitron:wght@600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Firebase CDN - Correct Compat Version for HTML -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
    
    <style>
        :root {
            --primary: #00C4B4;
            --secondary: #00DDEB;
            --accent: #00ff9f;
            --dark-bg: #0a0e27;
            --darker-bg: #060818;
            --card-bg: rgba(15, 20, 35, 0.95);
            --border: rgba(0, 196, 180, 0.3);
            --text: #ffffff;
            --text-dim: #B0BEC5;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f35 50%, #0a0e27 100%);
            background-attachment: fixed;
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            cursor: default;
        }

        .custom-cursor {
            position: fixed;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, var(--primary), var(--secondary));
            border-radius: 50%;
            pointer-events: none;
            z-index: 99999;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px var(--primary), 0 0 15px var(--secondary);
            animation: neonPulse 1.5s infinite ease-in-out;
            display: none;
        }

        @media (hover: hover) and (pointer: fine) {
            body * {
                cursor: none !important;
            }
            
            .custom-cursor {
                display: block !important;
            }
        }

        @media (hover: none) and (pointer: coarse) {
            .custom-cursor {
                display: none !important;
            }
            
            body * {
                cursor: auto !important;
            }
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }

        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker-bg);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: fadeOut 0.5s ease-out forwards 1.5s;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 196, 180, 0.1);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loader-text {
            color: var(--primary);
            font-size: 1rem;
            margin-top: 20px;
            font-weight: 600;
            letter-spacing: 3px;
        }

        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            right: -90px;
            width: 90px;
            background: rgba(10, 14, 39, 0.98);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: right 0.3s ease;
            border-left: 2px solid var(--border);
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.5);
        }

        .sidebar:hover {
            right: 0;
        }

        .sidebar-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 25px 0;
            height: 100%;
            overflow-y: auto;
        }

        .sidebar-content::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar-content::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 2px;
        }

        .sidebar-logo {
            width: 60px;
            height: 60px;
            filter: drop-shadow(0 0 15px var(--primary));
            animation: float 3s ease-in-out infinite;
            border-radius: 50%;
            object-fit: contain;
        }

        .stats-section {
            text-align: center;
            background: rgba(0, 196, 180, 0.1);
            padding: 15px 10px;
            border: 1.5px solid var(--primary);
            border-radius: 12px;
            width: 95%;
            margin: 10px 0;
        }

        .stats-section p {
            font-size: 10px;
            color: var(--text-dim);
            margin: 6px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .stats-section .highlight {
            font-size: 18px;
            font-weight: 800;
            color: var(--primary);
            text-shadow: 0 0 10px var(--primary);
            display: block;
            margin: 6px 0;
            font-family: 'Orbitron', sans-serif;
        }

        .developer-info {
            width: 95%;
            text-align: center;
        }

        .developer-info p {
            font-size: 9px;
            color: var(--text-dim);
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .developer-info .icon {
            font-size: 20px;
            color: var(--text-dim);
            display: block;
            margin: 12px 0;
            transition: var(--transition);
        }

        .developer-info .icon:hover {
            color: var(--primary);
            text-shadow: 0 0 15px var(--primary);
            transform: scale(1.3);
        }

        header {
            padding: 35px 20px;
            text-align: center;
            background: 
                linear-gradient(90deg, rgba(0, 196, 180, 0.05) 1px, transparent 1px),
                linear-gradient(rgba(0, 196, 180, 0.05) 1px, transparent 1px),
                linear-gradient(135deg, rgba(10, 14, 39, 0.98) 0%, rgba(20, 30, 50, 0.95) 100%);
            background-size: 50px 50px, 50px 50px, 100% 100%;
            backdrop-filter: blur(20px);
            border-bottom: 3px solid var(--primary);
            position: sticky;
            top: 0;
            z-index: 99;
            box-shadow: 0 5px 30px rgba(0, 196, 180, 0.3);
        }

        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
        }

        .kali-logo {
            width: 120px;
            height: 120px;
            filter: drop-shadow(0 0 30px var(--primary)) drop-shadow(0 0 50px var(--secondary));
            animation: float 4s ease-in-out infinite;
            border-radius: 15px;
            object-fit: contain;
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.8rem;
            font-weight: 900;
            color: var(--text);
            letter-spacing: 10px;
            text-transform: uppercase;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(0, 196, 180, 0.6);
            position: relative;
        }

        .logo-text::after {
            content: 'KALI-WALL';
            position: absolute;
            left: 0;
            top: 0;
            z-index: -1;
            filter: blur(25px);
            opacity: 0.8;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .nav-btn {
            text-decoration: none;
            color: var(--text);
            padding: 12px 28px;
            border: 2px solid var(--primary);
            border-radius: 25px;
            background: rgba(0, 196, 180, 0.1);
            transition: var(--transition);
            font-size: 1rem;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-family: 'Space Grotesk', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn:hover {
            background: var(--primary);
            color: var(--darker-bg);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 196, 180, 0.5);
        }

        .nav-btn.upload-btn-special {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border: 3px solid var(--accent);
            color: var(--darker-bg);
            font-weight: 900;
            padding: 14px 35px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 255, 159, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.2);
            animation: uploadPulse 2s infinite;
        }

        .nav-btn.upload-btn-special::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: rotate(45deg);
            animation: uploadShine 3s infinite;
        }

        .nav-btn.upload-btn-special:hover {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 50px rgba(0, 255, 159, 1);
        }

        .search-bar {
            max-width: 700px;
            margin: 25px auto;
            display: flex;
            gap: 0;
        }

        .search-bar input {
            padding: 15px 28px;
            width: 100%;
            background: rgba(10, 20, 40, 0.8);
            border: 2px solid var(--primary);
            border-right: none;
            color: var(--text);
            font-size: 1.05rem;
            border-radius: 30px 0 0 30px;
            outline: none;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
        }

        .search-bar button {
            padding: 15px 30px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: 2px solid var(--primary);
            border-left: none;
            color: var(--darker-bg);
            font-size: 1.3rem;
            border-radius: 0 30px 30px 0;
            transition: var(--transition);
            font-weight: 700;
            cursor: pointer;
        }

        .tags {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            padding: 15px;
        }

        .tag {
            text-decoration: none;
            color: var(--primary);
            font-size: 0.95rem;
            background: rgba(0, 196, 180, 0.1);
            padding: 10px 22px;
            border-radius: 25px;
            border: 1.5px solid var(--primary);
            transition: var(--transition);
            font-weight: 700;
            cursor: pointer;
            font-family: 'Space Grotesk', monospace;
        }

        .tag:hover,
        .tag.active {
            background: var(--primary);
            color: var(--darker-bg);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 196, 180, 0.5);
        }

        .filter-section {
            max-width: 1400px;
            margin: 25px auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-left {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 11px 22px;
            background: rgba(20, 25, 45, 0.8);
            border: 2px solid var(--primary);
            color: var(--text);
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 700;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-family: 'Space Grotesk', monospace;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--primary);
            color: var(--darker-bg);
        }

        .view-toggle {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            width: 42px;
            height: 42px;
            background: rgba(20, 25, 45, 0.8);
            border: 2px solid var(--primary);
            color: var(--text);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            cursor: pointer;
        }

        .view-btn:hover,
        .view-btn.active {
            background: var(--primary);
            color: var(--darker-bg);
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 30px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .wallpaper {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 20px;
            transition: var(--transition);
            box-shadow: 0 5px 25px rgba(0, 196, 180, 0.2);
            border: 2px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .wallpaper:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 50px rgba(0, 196, 180, 0.6);
            border-color: var(--primary);
        }

        .wallpaper img, .wallpaper video {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 15px;
            border: 2px solid var(--primary);
            transition: var(--transition);
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        .wallpaper-info {
            margin-top: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .wallpaper-meta {
            font-size: 0.75rem;
            color: var(--text-dim);
            font-style: italic;
        }

        .wallpaper-title {
            font-size: 0.9rem;
            color: var(--text-dim);
            font-weight: 600;
        }

        .download-btn {
            padding: 8px 18px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--darker-bg);
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }

        .load-more-section {
            text-align: center;
            padding: 40px 20px;
        }

        .load-more-btn {
            padding: 16px 45px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--darker-bg);
            border: 2px solid var(--primary);
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 700;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-family: 'Space Grotesk', monospace;
            box-shadow: 0 5px 20px rgba(0, 196, 180, 0.4);
        }

        .load-more-btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 196, 180, 0.6);
        }

        .load-more-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 35px;
            border-radius: 20px;
            border: 2px solid var(--primary);
            max-width: 550px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 196, 180, 0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-header h2 {
            color: var(--primary);
            font-size: 1.8rem;
            font-family: 'Orbitron', sans-serif;
        }

        .close-modal {
            font-size: 2rem;
            color: var(--text);
            cursor: pointer;
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--primary);
            transform: rotate(90deg);
        }

        .upload-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            color: var(--primary);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .form-group input {
            padding: 12px 18px;
            background: rgba(10, 20, 40, 0.8);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
        }

        .form-group input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(0, 196, 180, 0.3);
        }

        .upload-area {
            border: 3px dashed var(--primary);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-area:hover {
            background: rgba(0, 196, 180, 0.05);
            border-color: var(--secondary);
        }

        .upload-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .upload-btn {
            margin-top: 20px;
            padding: 14px 35px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--darker-bg);
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            font-family: 'Space Grotesk', monospace;
            transition: var(--transition);
        }

        .upload-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 196, 180, 0.6);
        }

        .upload-status {
            margin-top: 15px;
            padding: 12px;
            border-radius: 10px;
            display: none;
            font-weight: 600;
        }

        .upload-status.success {
            background: rgba(0, 255, 159, 0.2);
            border: 2px solid var(--accent);
            color: var(--accent);
            display: block;
        }

        .upload-status.error {
            background: rgba(255, 68, 68, 0.2);
            border: 2px solid #ff4444;
            color: #ff4444;
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0, 196, 180, 0.2);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.3s ease;
            width: 0%;
        }

        footer {
            padding: 50px 20px 30px;
            text-align: center;
            background: 
                linear-gradient(90deg, rgba(0, 196, 180, 0.05) 1px, transparent 1px),
                linear-gradient(rgba(0, 196, 180, 0.05) 1px, transparent 1px),
                linear-gradient(135deg, rgba(10, 14, 39, 0.98) 0%, rgba(5, 8, 16, 0.95) 100%);
            background-size: 50px 50px, 50px 50px, 100% 100%;
            border-top: 3px solid var(--primary);
            margin-top: 60px;
            box-shadow: 0 -5px 30px rgba(0, 196, 180, 0.2);
        }

        .footer-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            filter: drop-shadow(0 0 20px var(--primary));
            animation: float 4s ease-in-out infinite;
            border-radius: 50%;
            object-fit: contain;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto 40px;
            text-align: left;
        }

        .footer-section h3 {
            font-size: 1.4rem;
            color: var(--primary);
            margin-bottom: 20px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .footer-section p {
            color: var(--text-dim);
            line-height: 1.8;
            font-size: 0.95rem;
        }

        .footer-section a {
            color: var(--text-dim);
            text-decoration: none;
            display: block;
            margin: 10px 0;
            transition: var(--transition);
            font-size: 1rem;
            font-weight: 500;
        }

        .footer-section a:hover {
            color: var(--primary);
            transform: translateX(5px);
        }

        .footer-bottom {
            color: var(--text-dim);
            font-size: 0.9rem;
            padding-top: 30px;
            border-top: 2px solid var(--border);
            margin-top: 30px;
        }

        .footer-bottom a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: 2px solid var(--primary);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: var(--darker-bg);
            font-size: 22px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 5px 20px rgba(0, 196, 180, 0.5);
            transition: var(--transition);
        }

        .scroll-top:hover {
            transform: scale(1.15) rotate(360deg);
        }

        @media (max-width: 1024px) {
            .sidebar {
                display: none !important;
            }
        }

        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }

            .logo-text {
                font-size: 2.5rem;
                letter-spacing: 4px;
            }

            .kali-logo {
                width: 85px;
                height: 85px;
            }
        }

        @media (max-width: 480px) {
            .gallery {
                grid-template-columns: 1fr;
            }

            .logo-text {
                font-size: 2rem;
                letter-spacing: 2px;
            }

            .kali-logo {
                width: 70px;
                height: 70px;
            }
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        @keyframes neonPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
        }

        @keyframes uploadPulse {
            0%, 100% { box-shadow: 0 0 30px rgba(0, 255, 159, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.2); }
            50% { box-shadow: 0 0 50px rgba(0, 255, 159, 1), inset 0 0 30px rgba(255, 255, 255, 0.4); }
        }

        @keyframes uploadShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
    </style>
</head>
<body>
    <div id="preloader">
        <div class="loader"></div>
        <div class="loader-text">LOADING...</div>
    </div>

    <div id="particles-js"></div>
    <div class="custom-cursor"></div>

    <!-- Right Sidebar -->
    <div class="sidebar">
        <div class="sidebar-content">
            <img src="assets/web-logo.png" alt="KaliWall Logo" class="sidebar-logo">

            <div class="stats-section">
                <p>Downloads</p>
                <span class="highlight" id="total-downloads">2,547</span>
                <p>Live Users</p>
                <span class="highlight" id="live-users">24</span>
                <p>Total Items</p>
                <span class="highlight" id="active-users">0</span>
            </div>

            <div class="developer-info">
                <p>Connect</p>
                <a href="https://instagram.com/om_singh_213" class="icon" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
                <a href="https://github.com/shubham-shipt" class="icon" target="_blank" rel="noopener"><i class="fab fa-github"></i></a>
                <a href="https://linkedin.com/in/shubham-sh" class="icon" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i></a>
                <a href="mailto:shubhamscript@gmail.com" class="icon"><i class="fas fa-envelope"></i></a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="logo-section">
            <img src="assets/web-logo.png" alt="KaliWall - Premium Kali Linux Wallpapers" class="kali-logo">
            <h1 class="logo-text">KALI-WALL</h1>
        </div>
        
        <nav>
            <ul>
                <li><a href="#" class="nav-btn" onclick="filterLatest(); return false;"><i class="fas fa-clock"></i> Latest</a></li>
                <li><a href="#" class="nav-btn" onclick="filterTop(); return false;"><i class="fas fa-trophy"></i> Top</a></li>
                <li><a href="#" class="nav-btn" onclick="randomWallpaper(); return false;"><i class="fas fa-random"></i> Random</a></li>
                <li><a href="#" class="nav-btn upload-btn-special" onclick="openUploadModal(); return false;"><i class="fas fa-cloud-upload-alt"></i> UPLOAD NOW</a></li>
            </ul>
        </nav>

        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search wallpapers..." aria-label="Search wallpapers">
            <button onclick="searchWallpapers()" aria-label="Search"><i class="fas fa-search"></i></button>
        </div>

        <div class="tags">
            <a class="tag active" data-category="all" onclick="filterByTag('all', event); return false;">#All</a>
            <a class="tag" data-category="kalilinux" onclick="filterByTag('kalilinux', event); return false;">#KaliLinux</a>
            <a class="tag" data-category="cyberpunk" onclick="filterByTag('cyberpunk', event); return false;">#Cyberpunk</a>
            <a class="tag" data-category="dark" onclick="filterByTag('dark', event); return false;">#Dark</a>
            <a class="tag" data-category="tech" onclick="filterByTag('tech', event); return false;">#Tech</a>
            <a class="tag" data-category="hacking" onclick="filterByTag('hacking', event); return false;">#Hacking</a>
            <a class="tag" data-category="security" onclick="filterByTag('security', event); return false;">#Security</a>
            <a class="tag" data-category="uploaded" onclick="filterByTag('uploaded', event); return false;">#Community</a>
        </div>
    </header>

    <div class="filter-section">
        <div class="filter-left">
            <button class="filter-btn active" onclick="filterAll(this)"><i class="fas fa-th"></i> All</button>
            <button class="filter-btn" onclick="filter4K(this)"><i class="fas fa-image"></i> 4K</button>
            <button class="filter-btn" onclick="filterDark(this)"><i class="fas fa-moon"></i> Dark</button>
            <button class="filter-btn" onclick="filterPopular(this)"><i class="fas fa-fire"></i> Popular</button>
            <button class="filter-btn" onclick="filterCommunity(this)"><i class="fas fa-users"></i> Community</button>
        </div>
        <div class="view-toggle">
            <button class="view-btn active" onclick="setView('grid', this)" aria-label="Grid view"><i class="fas fa-th"></i></button>
            <button class="view-btn" onclick="setView('list', this)" aria-label="List view"><i class="fas fa-list"></i></button>
            <button class="view-btn" onclick="setView('compact', this)" aria-label="Compact view"><i class="fas fa-th-large"></i></button>
        </div>
    </div>

    <section class="gallery grid-view" id="gallery" role="main"></section>

    <div class="load-more-section">
        <button class="load-more-btn" id="loadMoreBtn" onclick="loadMore()">
            <i class="fas fa-plus-circle"></i> <span id="loadMoreText">Load More Wallpapers</span>
        </button>
    </div>

    <!-- Upload Modal -->
    <div class="modal" id="uploadModal" role="dialog" aria-labelledby="uploadModalTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="uploadModalTitle"><i class="fas fa-cloud-upload-alt"></i> Upload to Firebase</h2>
                <span class="close-modal" onclick="closeUploadModal()" aria-label="Close modal">&times;</span>
            </div>
            <form class="upload-form" id="uploadForm">
                <div class="form-group">
                    <label for="uploaderName">Your Name (Optional)</label>
                    <input type="text" id="uploaderName" placeholder="Enter your name" aria-label="Your name">
                </div>
                <div class="form-group">
                    <label for="uploaderLocation">Location (Optional)</label>
                    <input type="text" id="uploaderLocation" placeholder="Your location" aria-label="Your location">
                    <button type="button" onclick="getLocation()" style="margin-top: 8px; padding: 8px 16px; background: var(--primary); color: var(--darker-bg); border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        <i class="fas fa-map-marker-alt"></i> Auto-detect Location
                    </button>
                </div>
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <p style="font-weight: 600; font-size: 1.1rem;">Drag & Drop your file here</p>
                    <p style="color: var(--text-dim); font-size: 0.9rem; margin-top: 10px;">Supported: PNG, JPG, JPEG, GIF, MP4, WEBM, MP3</p>
                    <input type="file" id="fileInput" accept="image/*,video/*,audio/*" style="display: none;" aria-label="Choose file">
                </div>
                <button type="button" class="upload-btn" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-folder-open"></i> Choose File
                </button>
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="upload-status" id="uploadStatus"></div>
                <button type="submit" class="upload-btn" style="background: linear-gradient(135deg, var(--accent), var(--primary));">
                    <i class="fas fa-paper-plane"></i> Upload to Firebase (Worldwide)
                </button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <img src="assets/web-logo.png" alt="KaliWall Logo" class="footer-logo">

        <div class="footer-content">
            <div class="footer-section">
                <h3>About KaliWall</h3>
                <p>Premium Kali Linux wallpapers and media collection powered by Firebase. Upload and share with the worldwide cybersecurity community.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="#"><i class="fas fa-home"></i> Home</a>
                <a href="#gallery"><i class="fas fa-images"></i> Gallery</a>
                <a href="#" onclick="openUploadModal(); return false;"><i class="fas fa-upload"></i> Upload</a>
                <a href="https://github.com/shivam-the/kaliwall" target="_blank" rel="noopener"><i class="fab fa-github"></i> GitHub</a>
            </div>
            <div class="footer-section">
                <h3>Connect</h3>
                <a href="https://instagram.com/om_singh_213" target="_blank" rel="noopener"><i class="fab fa-instagram"></i> Instagram</a>
                <a href="https://twitter.com/Om_singh_213" target="_blank" rel="noopener"><i class="fab fa-twitter"></i> Twitter</a>
                <a href="https://linkedin.com/in/shubham-sh" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i> LinkedIn</a>
                <a href="mailto:shubscript@gmail.com"><i class="fas fa-envelope"></i> Email</a>
            </div>
        </div>

        <div class="footer-bottom">
            <p>Â© 2025 KaliWall | Developed by <a href="https://github.com/shivam-the" target="_blank" rel="noopener">Shubham Singh (@shivam-the)</a></p>
            <p style="margin-top: 10px; font-size: 0.85rem;">Powered by <a href="https://firebase.google.com/" target="_blank" rel="noopener">Firebase</a> | Hosted on <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> | User: shivam-the | UTC: 2025-11-24 10:05:01</p>
        </div>
    </footer>

    <button class="scroll-top" id="scrollTop" onclick="scrollToTop()" aria-label="Scroll to top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
        // ========== FIREBASE CONFIGURATION ==========
        const firebaseConfig = {
            apiKey: "AIzaSyB9xR559RFvOoK3nnDRmluoVA5gIZfvcTY",
            authDomain: "kali-wall.firebaseapp.com",
            projectId: "kali-wall",
            storageBucket: "kali-wall.appspot.com",
            messagingSenderId: "453999076336",
            appId: "1:453999076336:web:7d4206e66500f0a794b335",
            measurementId: "G-QVG0Q65JGH"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage();
        
        console.log('%cðŸ”¥ Firebase Connected!', 'color: #FF6B00; font-size: 16px; font-weight: bold;');
        
        // ========== LOGGING ==========
        class KaliWallLogger {
            constructor() {
                this.logs = JSON.parse(localStorage.getItem('kaliwall_logs')) || [];
            }
            log(action, details = {}) {
                const logEntry = {
                    timestamp: new Date().toISOString(),
                    action: action,
                    details: details,
                    user: 'shivam-the',
                    sessionId: this.getSessionId()
                };
                this.logs.push(logEntry);
                localStorage.setItem('kaliwall_logs', JSON.stringify(this.logs.slice(-100)));
                console.log(`%c[KaliWall] ${action}`, 'color: #00C4B4; font-weight: bold;', details);
            }
            getSessionId() {
                let sessionId = sessionStorage.getItem('kaliwall_session');
                if (!sessionId) {
                    sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    sessionStorage.setItem('kaliwall_session', sessionId);
                }
                return sessionId;
            }
            exportLogs() {
                return this.logs;
            }
        }

        const logger = new KaliWallLogger();
        logger.log('Page Loaded', { url: window.location.href, time: '2025-11-24 10:05:01', user: 'shivam-the' });

        const getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

        // ========== DEFAULT WALLPAPERS ==========
        const defaultWallpapers = [
            { id: 4, src: 'Wall-Kali/4.png', category: 'kalilinux', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 6, src: 'Wall-Kali/6.png', category: 'dark', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 11, src: 'Wall-Kali/11.png', category: 'security', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 14, src: 'Wall-Kali/14.jpg', category: 'dark tech', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 16, src: 'Wall-Kali/16.png', category: 'cyberpunk', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 18, src: 'Wall-Kali/18.png', category: 'hacking', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 20, src: 'Wall-Kali/20.png', category: 'tech', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 21, src: 'Wall-Kali/21.jpg', category: 'dark', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 22, src: 'Wall-Kali/22.png', category: 'kalilinux', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 23, src: 'Wall-Kali/23.png', category: 'cyberpunk', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 24, src: 'Wall-Kali/24.png', category: 'tech', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 25, src: 'Wall-Kali/25.jpg', category: 'security', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 26, src: 'Wall-Kali/26.jpg', category: 'dark', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 28, src: 'Wall-Kali/28.png', category: 'hacking', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 29, src: 'Wall-Kali/29.png', category: 'cyberpunk', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 33, src: 'Wall-Kali/33.png', category: 'tech', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 37, src: 'Wall-Kali/37.png', category: 'kalilinux', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 47, src: 'Wall-Kali/47.png', category: 'dark', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 48, src: 'Wall-Kali/48.png', category: 'hacking', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 49, src: 'Wall-Kali/49.png', category: 'security', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 54, src: 'Wall-Kali/54.png', category: 'cyberpunk', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 55, src: 'Wall-Kali/55.png', category: 'tech', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 57, src: 'Wall-Kali/57.png', category: 'dark', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 58, src: 'Wall-Kali/58.png', category: 'kalilinux dark', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 59, src: 'Wall-Kali/59.png', category: 'cyberpunk', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 63, src: 'Wall-Kali/63.png', category: 'hacking', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 65, src: 'Wall-Kali/65.svg', category: 'tech', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 67, src: 'Wall-Kali/67.svg', category: 'kalilinux', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 68, src: 'Wall-Kali/68.svg', category: 'security', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 70, src: 'Wall-Kali/70.svg', category: 'dark', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 82, src: 'Wall-Kali/82.png', category: 'tech', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 83, src: 'Wall-Kali/83.png', category: 'dark', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 84, src: 'Wall-Kali/84.png', category: 'cyberpunk', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 85, src: 'Wall-Kali/85.png', category: 'hacking', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 89, src: 'Wall-Kali/89.png', category: 'security', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 90, src: 'Wall-Kali/90.png', category: 'kalilinux', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 91, src: 'Wall-Kali/91.png', category: 'dark', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 92, src: 'Wall-Kali/92.png', category: 'tech', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 94, src: 'Wall-Kali/94.png', category: 'cyberpunk', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 95, src: 'Wall-Kali/95.png', category: 'hacking', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 99, src: 'Wall-Kali/99.png', category: 'kalilinux', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 100, src: 'Wall-Kali/100.png', category: 'security', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 104, src: 'Wall-Kali/104.png', category: 'dark', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 106, src: 'Wall-Kali/106.png', category: 'tech', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 109, src: 'Wall-Kali/109.png', category: 'cyberpunk', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 110, src: 'Wall-Kali/110.png', category: 'hacking', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 111, src: 'Wall-Kali/111.png', category: 'kalilinux', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 112, src: 'Wall-Kali/112.png', category: 'security', popular: false, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 114, src: 'Wall-Kali/114.png', category: 'dark', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' },
            { id: 157, src: 'Wall-Kali/157.png', category: 'hacking', popular: true, type: 'image', uploader: 'KaliWall', location: 'Official' }
        ];

        let allWallpapers = [];
        let displayedCount = 0;
        const LOAD_INCREMENT = 12;

        // ========== LOAD FIREBASE WALLPAPERS ==========
        async function loadFirebaseWallpapers() {
            const wallpapers = [];
            try {
                logger.log('Loading from Firebase');
                console.log('%cðŸ”¥ Fetching from Firebase...', 'color: #FF6B00; font-size: 14px;');
                
                const snapshot = await db.collection("wallpapers")
                    .orderBy("uploadDate", "desc")
                    .limit(100)
                    .get();

                snapshot.forEach(doc => {
                    const data = doc.data();
                    wallpapers.push({
                        ...data,
                        firebaseId: doc.id,
                        src: data.src || data.url,
                        id: data.id || doc.id
                    });
                });
                
                console.log(`%câœ… Loaded ${wallpapers.length} from Firebase`, 'color: #00ff9f; font-size: 14px; font-weight: bold;');
                logger.log('Firebase Load Success', { count: wallpapers.length });
                
                return wallpapers;
                
            } catch (error) {
                console.error('%cðŸ”¥ Firebase Error:', 'color: #ff4444; font-size: 14px;', error);
                logger.log('Firebase Load Error', { error: error.message });
                return [];
            }
        }

        // ========== UPLOAD TO FIREBASE ==========
        async function uploadToFirebase(file, uploaderName, uploaderLocation) {
            try {
                logger.log('Firebase Upload Started', { filename: file.name, size: file.size });
                
                const timestamp = Date.now();
                const safeFileName = file.name.replace(/[^a-zA-Z0-9.-]/g, '_');
                const fileName = `uploads/${timestamp}_${safeFileName}`;
                
                const storageRef = storage.ref(fileName);
                const uploadTask = storageRef.put(file);
                
                const progressBar = document.getElementById('progressBar');
                const progressFill = document.getElementById('progressFill');
                progressBar.style.display = 'block';
                
                                
                uploadTask.on('state_changed', 
                    (snapshot) => {
                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        progressFill.style.width = progress + '%';
                        showUploadStatus(`â³ Uploading: ${progress.toFixed(0)}%`, 'success');
                        console.log(`Upload progress: ${progress.toFixed(2)}%`);
                    },
                    (error) => {
                        logger.log('Firebase Upload Error', { error: error.message });
                        showUploadStatus('âŒ Upload failed: ' + error.message, 'error');
                        progressBar.style.display = 'none';
                    },
                    async () => {
                        const downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                        logger.log('Firebase Upload Complete', { url: downloadURL });
                        
                        const fileType = file.type.startsWith('image') ? 'image' : 
                                       file.type.startsWith('video') ? 'video' : 'audio';
                        
                        const wallpaperData = {
                            id: timestamp,
                            src: downloadURL,
                            category: 'uploaded',
                            popular: false,
                            type: fileType,
                            uploader: uploaderName,
                            location: uploaderLocation,
                            uploadDate: new Date().toISOString(),
                            filename: file.name,
                            size: file.size,
                            uploadedBy: 'shivam-the'
                        };
                        
                        await db.collection('wallpapers').doc(timestamp.toString()).set(wallpaperData);
                        
                        logger.log('Saved to Firestore', { id: timestamp });
                        
                        allWallpapers.unshift(wallpaperData);
                        loadWallpapers(false);
                        
                        closeUploadModal();
                        document.getElementById('uploadForm').reset();
                        progressBar.style.display = 'none';
                        progressFill.style.width = '0%';
                        
                        showUploadStatus(`âœ… ${fileType.toUpperCase()} uploaded successfully!`, 'success');
                        
                        setTimeout(() => {
                            alert(`ðŸŽ‰ SUCCESS!\n\nYour ${fileType} is now live worldwide!\n\nâœ… Uploaded by: ${uploaderName}\nðŸ“ From: ${uploaderLocation}\nðŸ”¥ Stored on Firebase\nðŸŒ Visible to everyone\n\nThank you!`);
                        }, 500);
                    }
                );
                
            } catch (error) {
                logger.log('Upload Error', { error: error.message });
                showUploadStatus('âŒ Upload failed: ' + error.message, 'error');
                document.getElementById('progressBar').style.display = 'none';
            }
        }

        // ========== LOAD WALLPAPERS TO UI ==========
        function loadWallpapers(append = false) {
            const gallery = document.getElementById('gallery');
            
            if (!append) {
                gallery.innerHTML = '';
                displayedCount = 0;
            }

            const start = displayedCount;
            const end = Math.min(start + LOAD_INCREMENT, allWallpapers.length);
            
            for (let i = start; i < end; i++) {
                const wallpaper = allWallpapers[i];
                
                const div = document.createElement('div');
                div.className = 'wallpaper';
                div.dataset.category = wallpaper.category;
                div.dataset.popular = wallpaper.popular;
                div.dataset.id = wallpaper.id;
                
                const mediaElement = wallpaper.type === 'video' ? 
                    `<video src="${wallpaper.src}" controls loading="lazy" alt="Video ${wallpaper.id}"></video>` :
                    wallpaper.type === 'audio' ?
                    `<audio src="${wallpaper.src}" controls style="width: 100%; height: 50px;" alt="Audio ${wallpaper.id}"></audio>` :
                    `<img src="${wallpaper.src}" alt="Wallpaper ${wallpaper.id}" loading="lazy">`;
                
                const uploaderInfo = wallpaper.uploader && wallpaper.uploader !== 'KaliWall' ? 
                    `<div class="wallpaper-meta">ðŸ‘¤ ${wallpaper.uploader}${wallpaper.location ? ` | ðŸ“ ${wallpaper.location}` : ''}</div>` : 
                    wallpaper.uploader === 'KaliWall' ? 
                    `<div class="wallpaper-meta">â­ Official Collection</div>` : '';
                
                div.innerHTML = `
                    ${mediaElement}
                    <div class="wallpaper-info">
                        <div>
                            <span class="wallpaper-title">#${wallpaper.id}</span>
                            ${uploaderInfo}
                        </div>
                        <a class="download-btn" onclick="handleDownload(event, '${wallpaper.src}', ${wallpaper.id})" aria-label="Download ${wallpaper.id}">
                            <i class="fas fa-download"></i> Download
                        </a>
                    </div>
                `;
                gallery.appendChild(div);
            }

            displayedCount = end;
            updateLoadMoreButton();
            updateStats();
            logger.log('Wallpapers Displayed', { displayed: displayedCount, total: allWallpapers.length });
        }

        function updateLoadMoreButton() {
            const btn = document.getElementById('loadMoreBtn');
            const textSpan = document.getElementById('loadMoreText');
            const remaining = allWallpapers.length - displayedCount;

            if (remaining <= 0) {
                textSpan.textContent = `All ${allWallpapers.length} Items Loaded`;
                btn.disabled = true;
            } else {
                textSpan.textContent = `Load More (${remaining} remaining)`;
                btn.disabled = false;
            }
        }

        function updateStats() {
            document.getElementById('active-users').textContent = allWallpapers.length.toLocaleString();
        }

        function loadMore() {
            const btn = document.getElementById('loadMoreBtn');
            const textSpan = document.getElementById('loadMoreText');
            
            textSpan.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
            btn.disabled = true;
            
            setTimeout(() => {
                loadWallpapers(true);
                btn.disabled = false;
                logger.log('Load More Clicked', { newDisplayCount: displayedCount });
            }, 800);
        }

        // ========== GEOLOCATION ==========
        function getLocation() {
            logger.log('Geolocation Requested');
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    fetch(`https://nominatim.openstreetmap.org/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json`)
                        .then(res => res.json())
                        .then(data => {
                            const location = data.address.city || data.address.town || data.address.country || 'Unknown';
                            document.getElementById('uploaderLocation').value = location;
                            logger.log('Location Detected', { location: location });
                        })
                        .catch(() => {
                            document.getElementById('uploaderLocation').value = 'Location detected';
                            logger.log('Location Detection Failed');
                        });
                }, () => {
                    alert('âŒ Unable to get location. Please enter manually.');
                    logger.log('Geolocation Permission Denied');
                });
            } else {
                alert('âŒ Geolocation is not supported by your browser.');
                logger.log('Geolocation Not Supported');
            }
        }

        // ========== UPLOAD HANDLERS ==========
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');

        uploadArea.addEventListener('click', () => fileInput.click());

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.background = 'rgba(0, 196, 180, 0.1)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.background = '';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.background = '';
            const files = e.dataTransfer.files;
            if (files.length > 0) fileInput.files = files;
        });

        function showUploadStatus(message, type) {
            const uploadStatus = document.getElementById('uploadStatus');
            uploadStatus.textContent = message;
            uploadStatus.className = `upload-status ${type}`;
            if (!message.includes('Uploading:')) {
                setTimeout(() => {
                    uploadStatus.className = 'upload-status';
                }, 5000);
            }
        }

        // ========== SEARCH & FILTERS ==========
        function searchWallpapers() {
            const input = document.getElementById("searchInput").value.toLowerCase().trim();
            const wallpapers = document.querySelectorAll(".wallpaper");
            let found = 0;
            
            wallpapers.forEach(wallpaper => {
                const text = wallpaper.textContent.toLowerCase();
                const category = wallpaper.dataset.category.toLowerCase();
                const id = wallpaper.dataset.id;
                
                if (text.includes(input) || category.includes(input) || id.includes(input)) {
                    wallpaper.style.display = "block";
                    found++;
                } else {
                    wallpaper.style.display = "none";
                }
            });

            if (found === 0 && input !== "") {
                alert(`âŒ No items found for "${input}"`);
            }
            
            logger.log('Search Performed', { query: input, results: found });
        }

        document.getElementById("searchInput").addEventListener("keypress", (e) => {
            if (e.key === "Enter") searchWallpapers();
        });

        function filterAll(btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll(".wallpaper").forEach(w => w.style.display = "block");
            logger.log('Filter Applied', { filter: 'All' });
        }

        function filter4K(btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll(".wallpaper").forEach(w => {
                w.style.display = parseInt(w.dataset.id) > 80 ? "block" : "none";
            });
            logger.log('Filter Applied', { filter: '4K' });
        }

        function filterDark(btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll(".wallpaper").forEach(w => {
                w.style.display = w.dataset.category.includes('dark') ? "block" : "none";
            });
            logger.log('Filter Applied', { filter: 'Dark' });
        }

        function filterPopular(btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll(".wallpaper").forEach(w => {
                w.style.display = w.dataset.popular === 'true' ? "block" : "none";
            });
            logger.log('Filter Applied', { filter: 'Popular' });
        }

        function filterCommunity(btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll(".wallpaper").forEach(w => {
                w.style.display = w.dataset.category.includes('uploaded') ? "block" : "none";
            });
            logger.log('Filter Applied', { filter: 'Community' });
        }

        function filterByTag(category, event) {
            event.preventDefault();
            document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            const wallpapers = document.querySelectorAll(".wallpaper");
            
            if (category === 'all') {
                wallpapers.forEach(w => w.style.display = "block");
            } else {
                wallpapers.forEach(w => {
                    w.style.display = w.dataset.category.includes(category) ? "block" : "none";
                });
            }
            
            logger.log('Tag Filter Applied', { category: category });
        }

        function setView(view, btn) {
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            const gallery = document.getElementById('gallery');
            gallery.className = `gallery ${view}-view`;
            
            logger.log('View Changed', { view: view });
        }

        function openUploadModal() {
            document.getElementById('uploadModal').classList.add('active');
            document.getElementById('uploadModal').setAttribute('aria-hidden', 'false');
            logger.log('Upload Modal Opened');
        }

        function closeUploadModal() {
            document.getElementById('uploadModal').classList.remove('active');
            document.getElementById('uploadModal').setAttribute('aria-hidden', 'true');
            logger.log('Upload Modal Closed');
        }

        function filterLatest() {
            allWallpapers.sort((a, b) => b.id - a.id);
            loadWallpapers(false);
            logger.log('Filter Applied', { filter: 'Latest' });
        }

        function filterTop() {
            filterPopular(document.querySelector('.filter-btn'));
        }

        function randomWallpaper() {
            const wallpapers = document.querySelectorAll('.wallpaper[style="display: block"], .wallpaper:not([style])');
            if (wallpapers.length === 0) return;
            
            const random = wallpapers[getRandomInt(0, wallpapers.length - 1)];
            random.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            random.style.transform = 'scale(1.15)';
            random.style.boxShadow = '0 25px 70px rgba(0, 196, 180, 1)';
            setTimeout(() => {
                random.style.transform = '';
                random.style.boxShadow = '';
            }, 2000);
            
            logger.log('Random Wallpaper Viewed', { id: random.dataset.id });
        }

        function handleDownload(event, src, id) {
            event.preventDefault();
            const link = document.createElement('a');
            link.href = src;
            link.download = `kaliwall-${id}`;
            link.click();
            
            const btn = event.currentTarget;
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> Downloaded!';
            btn.style.background = 'linear-gradient(135deg, #00ff9f, #00C4B4)';
            
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.style.background = '';
            }, 2000);
            
            let downloads = parseInt(document.getElementById('total-downloads').textContent.replace(/,/g, ''));
            downloads++;
            document.getElementById('total-downloads').textContent = downloads.toLocaleString();
            
            logger.log('Download', { id: id, src: src });
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            logger.log('Scrolled to Top');
        }

        // ========== CURSOR EFFECTS ==========
        if (!isTouchDevice) {
            const cursor = document.querySelector('.custom-cursor');
            document.addEventListener('mousemove', (e) => {
                if (cursor) {
                    cursor.style.left = e.clientX + 'px';
                    cursor.style.top = e.clientY + 'px';
                }
            });
        }

        // ========== INITIALIZATION ==========
        document.addEventListener("DOMContentLoaded", async () => {
            console.log('%cðŸš€ KaliWall v3.0 Initializing...', 'color: #00C4B4; font-size: 16px; font-weight: bold;');
            
            const firebaseWallpapers = await loadFirebaseWallpapers();
            
            if (firebaseWallpapers.length > 0) {
                console.log(`%cðŸ”¥ Merging ${firebaseWallpapers.length} Firebase + ${defaultWallpapers.length} Default`, 'color: #FF6B00; font-size: 14px;');
                allWallpapers = [...firebaseWallpapers, ...defaultWallpapers];
            } else {
                console.log('%cðŸ“¦ No Firebase items, using defaults', 'color: #FFB800; font-size: 14px;');
                allWallpapers = [...defaultWallpapers];
            }
            
            loadWallpapers(false);
            
            console.log(`%câœ… Total: ${allWallpapers.length} wallpapers loaded`, 'color: #00ff9f; font-size: 16px; font-weight: bold;');

            const uploadForm = document.getElementById('uploadForm');
            uploadForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const file = fileInput.files[0];
                if (!file) {
                    showUploadStatus('âŒ Please select a file!', 'error');
                    return;
                }

                const uploaderName = document.getElementById('uploaderName').value || 'Anonymous';
                const uploaderLocation = document.getElementById('uploaderLocation').value || 'Unknown';

                const confirmMessage = `ðŸ”¥ FIREBASE WORLDWIDE UPLOAD\n\nðŸ“ File: ${file.name}\nðŸ“Š Size: ${(file.size / 1024 / 1024).toFixed(2)} MB\nðŸ‘¤ Name: ${uploaderName}\nðŸ“ Location: ${uploaderLocation}\n\nâš ï¸ Visible to EVERYONE worldwide!\n\nClick OK to upload.`;

                if (!confirm(confirmMessage)) {
                    logger.log('Upload Cancelled', { filename: file.name });
                    return;
                }

                if (!confirm('âš ï¸ FINAL CONFIRMATION: Upload to Firebase?')) {
                    logger.log('Upload Cancelled Final', { filename: file.name });
                    return;
                }

                await uploadToFirebase(file, uploaderName, uploaderLocation);
            });

            if (typeof particlesJS !== 'undefined') {
                particlesJS('particles-js', {
                    particles: {
                        number: { value: isTouchDevice ? 40 : 80, density: { enable: true, value_area: 800 } },
                        color: { value: '#00C4B4' },
                        opacity: { value: 0.5 },
                        size: { value: 3 },
                        line_linked: { enable: true, color: '#00C4B4', opacity: 0.4, width: 1 },
                        move: { enable: true, speed: 2 }
                    },
                    interactivity: {
                        detect_on: 'canvas',
                        events: { 
                            onhover: { enable: !isTouchDevice, mode: 'grab' }, 
                            onclick: { enable: true, mode: 'push' } 
                        },
                        modes: { grab: { distance: 140 }, push: { particles_nb: 4 } }
                    }
                });
            }

            window.addEventListener('scroll', () => {
                document.getElementById('scrollTop').style.display = window.pageYOffset > 300 ? 'flex' : 'none';
            });

            let downloads = 2547;
            setInterval(() => {
                downloads += getRandomInt(1, 5);
                document.getElementById('total-downloads').textContent = downloads.toLocaleString();
                document.getElementById('live-users').textContent = getRandomInt(20, 50);
            }, 30000);

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        observer.unobserve(entry.target);
                    }
                });
            }, { rootMargin: '50px' });

            setInterval(() => {
                document.querySelectorAll('.wallpaper img[loading="lazy"], .wallpaper video[loading="lazy"]').forEach(media => {
                    if (media.style.opacity !== '1') observer.observe(media);
                });
            }, 1000);

            document.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }
                if (e.key === 'Escape') {
                    document.getElementById('searchInput').value = '';
                    searchWallpapers();
                    closeUploadModal();
                }
                if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                    e.preventDefault();
                    randomWallpaper();
                }
                if ((e.ctrlKey || e.metaKey) && e.key === 'u') {
                    e.preventDefault();
                    openUploadModal();
                }
            });

            console.log('%câ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—     ', 'color: #00C4B4; font-weight: bold;');
            console.log('%câ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     ', 'color: #00DDEB; font-weight: bold;');
            console.log('%câ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     ', 'color: #00ff9f; font-weight: bold;');
            console.log('%câ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     ', 'color: #00C4B4; font-weight: bold;');
            console.log('%câ–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘    â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—', 'color: #00DDEB; font-weight: bold;');
            console.log('%câ•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•', 'color: #00ff9f; font-weight: bold;');
            console.log('%c\nðŸ”¥ KaliWall v3.0 - Firebase Powered', 'color: #FF6B00; font-size: 18px; font-weight: bold;');
            console.log(`%cðŸ“Š Firebase: ${firebaseWallpapers.length} | Default: ${defaultWallpapers.length} | Total: ${allWallpapers.length}`, 'color: #00DDEB; font-size: 14px;');
            console.log('%cðŸ‘¤ User: shivam-the | UTC: 2025-11-24 10:07:57', 'color: #B0BEC5; font-size: 12px;');
            console.log('%cðŸŒ Firebase Storage | Firestore Database | Worldwide Access', 'color: #FF6B00; font-size: 12px;');
            console.log('%c\nðŸ‘¨â€ðŸ’» Developer: Shubham Singh (@shivam-the)', 'color: #00DDEB; font-size: 12px;');
            console.log('%cðŸ”— GitHub: https://github.com/shivam-the/kaliwall', 'color: #00ff9f; font-size: 12px;');
            console.log('%cðŸ“ Logs: logger.exportLogs()', 'color: #B0BEC5; font-size: 11px;');
            console.log('%câœ… All systems operational!', 'color: #00ff9f; font-size: 14px; font-weight: bold;');
        });
    </script>
</body>
</html>
